<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Syncing Methods | dt-cli</title>
    <meta name="description" content="Documentations for dt-cli <https://github.com/blurgyy/dt>">
    <link rel="stylesheet" href="/assets/style.5a53002e.css">
    <link rel="modulepreload" href="/assets/Home.d96819e1.js">
    <link rel="modulepreload" href="/assets/app.4c187c71.js">
    <link rel="modulepreload" href="/assets/config_guide_03-syncing-methods.md.cb77d135.lean.js">
    <link rel="modulepreload" href="/assets/app.4c187c71.js">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&amp;family=Rubik:wght@300..900">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="/home-everywhere.png">
    <meta property="og:image" content="/home-everywhere.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="794">
    <meta name="twitter:title" content="Syncing Methods | dt-cli">
    <meta property="og:title" content="Syncing Methods | dt-cli">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-15af6055><div class="sidebar-button" data-v-15af6055><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="dt-cli, back to home" data-v-15af6055 data-v-40ff3ea1><!----> dt-cli</a><div class="flex-grow" data-v-15af6055></div><div class="nav" data-v-15af6055><nav class="nav-links" data-v-15af6055 data-v-928d35fe><!--[--><div class="item" data-v-928d35fe><div class="nav-link" data-v-928d35fe data-v-338c5c3a><a class="item" href="/" data-v-338c5c3a>Overview <!----></a></div></div><div class="item" data-v-928d35fe><div class="nav-link" data-v-928d35fe data-v-338c5c3a><a class="item active" href="/config/guide/" data-v-338c5c3a>Guide <!----></a></div></div><div class="item" data-v-928d35fe><div class="nav-link" data-v-928d35fe data-v-338c5c3a><a class="item" href="/config/key-references" data-v-338c5c3a>Key References <!----></a></div></div><!--]--><!----><div class="item" data-v-928d35fe><div class="nav-link" data-v-928d35fe data-v-338c5c3a><a class="item isExternal" href="https://github.com/blurgyy/dt" target="_blank" rel="noopener noreferrer" data-v-338c5c3a>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-338c5c3a><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-56328ecc><nav class="nav-links nav" data-v-56328ecc data-v-928d35fe><!--[--><div class="item" data-v-928d35fe><div class="nav-link" data-v-928d35fe data-v-338c5c3a><a class="item" href="/" data-v-338c5c3a>Overview <!----></a></div></div><div class="item" data-v-928d35fe><div class="nav-link" data-v-928d35fe data-v-338c5c3a><a class="item active" href="/config/guide/" data-v-338c5c3a>Guide <!----></a></div></div><div class="item" data-v-928d35fe><div class="nav-link" data-v-928d35fe data-v-338c5c3a><a class="item" href="/config/key-references" data-v-338c5c3a>Key References <!----></a></div></div><!--]--><!----><div class="item" data-v-928d35fe><div class="nav-link" data-v-928d35fe data-v-338c5c3a><a class="item isExternal" href="https://github.com/blurgyy/dt" target="_blank" rel="noopener noreferrer" data-v-338c5c3a>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-338c5c3a><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-56328ecc><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Hands-on Guide</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/config/guide/">Basics</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config/guide/01-default-behaviours">Defining Default Behaviours</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config/guide/02-groups">Groups</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/config/guide/03-syncing-methods">Syncing Methods</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#overview">Overview</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#copy">Copy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#symlink">Symlink</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#default-method">Default Method</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#overriding">Overriding</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config/guide/04-host-specific">Host-specific Config</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config/guide/05-priority">Scopes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config/guide/06-error-handling">Error Handling</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config/key-references">Key References</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-fa9c5278><div class="container" data-v-fa9c5278><!--[--><!--]--><div style="position:relative;" class="content" data-v-fa9c5278><div><h1 id="syncing-methods" tabindex="-1">Syncing Methods <a class="header-anchor" href="#syncing-methods" aria-hidden="true">#</a></h1><p>Until the last section, no comments has been given on the <strong>stage</strong> -&gt; <strong>symlink</strong> steps. This section explains all the details a user wants to know about this process.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you are interested in all the details of the process, I refer you to the implementation of <code>dt_core::syncing::sync_core</code><a href="https://github.com/blurgyy/dt/blob/main/dt-core/src/syncing.rs" target="_blank" rel="noopener noreferrer">here</a>.</p></div><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-hidden="true">#</a></h2><p>There are 2 available syncing methods: <code>Copy</code> and <code>Symlink</code>, where <code>Symlink</code> is the chosen default.</p><h3 id="copy" tabindex="-1"><code>Copy</code> <a class="header-anchor" href="#copy" aria-hidden="true">#</a></h3><p>Directly copies source items defined in <code>sources</code> arrays to target.</p><h3 id="symlink" tabindex="-1"><code>Symlink</code> <a class="header-anchor" href="#symlink" aria-hidden="true">#</a></h3><p>First copies source items defined in <code>sources</code> arrays (this is called <em>staging</em>) to <strong>current group&#39;s</strong> staging directory (see <a href="/config/key-references.html#staging"><code>global.staging</code></a> and <a href="/config/key-references.html#name"><code>name</code></a>), then symlinks the staged items to target.</p><h2 id="default-method" tabindex="-1">Default Method <a class="header-anchor" href="#default-method" aria-hidden="true">#</a></h2><p><code>dt-cli</code> chooses <code>Symlink</code> as the default behaviour. The added <em>staging</em> step:</p><ul><li>Makes it possible to organize sources according to their group <a href="/config/key-references.html#name"><code>name</code></a>s, which <code>Copy</code> does not.<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This means it allows human-readable directory structures, because groups are organized by your given <a href="/config/key-references.html#name"><code>name</code></a>s. You can also create a git repository at the staging root directory if you want,</p></div></li><li>Makes it possible to control permission of organized items from system-level <code>sources</code> which you shouldn&#39;t directly modify.</li><li>When the target and source are the same (by accident), <code>Copy</code> does not guarantee integrity of the source item, while <code>Symlink</code> preserves the file content in the staging directory.</li><li>Make all further symlinks point at most to the staged items.<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This particularly helpful when you manage user-scope systemd services with symlinks. According to <a href="https://man.archlinux.org/man/systemctl.1" target="_blank" rel="noopener noreferrer"><code>systemctl(1)</code></a>:</p><blockquote><p>Disables one or more units. This removes all symlinks to the unit files backing the specified units from the unit configuration directory, and hence undoes any changes made by enable or link. Note that this removes all symlinks to matching unit files, including manually created symlinks, and not just those actually created by enable or link.</p></blockquote><p>That said, when disabling services (with <code>systemctl --user disable</code>), <code>systemctl</code> removes all symlinks (<strong>including user-created ones!</strong>).</p><p>With this added <em>staging</em> process, your source files will be well protected.</p></div></li><li>Protects original items if you want to make experimental changes.</li></ul><h2 id="overriding" tabindex="-1">Overriding <a class="header-anchor" href="#overriding" aria-hidden="true">#</a></h2><p>You can always override the default syncing method to <code>Copy</code> conveniently by adding <code>method = &quot;Copy&quot;</code> to the <code>[global]</code> section:</p><div class="language-toml"><pre><code><span class="token punctuation">[</span><span class="token table class-name">global</span><span class="token punctuation">]</span>
<span class="token key property">method</span> <span class="token punctuation">=</span> <span class="token string">&quot;Copy&quot;</span>
</code></pre></div><p>Or specify the syncing method for a given group similarly:</p><div class="language-toml"><pre><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">local</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">method</span> <span class="token punctuation">=</span> <span class="token string">&quot;Copy&quot;</span>
</code></pre></div></div></div><footer class="page-footer" data-v-fa9c5278 data-v-3b32619d><div class="edit" data-v-3b32619d><div class="edit-link" data-v-3b32619d data-v-ff4b4d56><!----></div></div><div class="updated" data-v-3b32619d><!----></div></footer><div class="next-and-prev-link" data-v-fa9c5278 data-v-140b3f5f><div class="container" data-v-140b3f5f><div class="prev" data-v-140b3f5f><a class="link" href="/config/guide/02-groups" data-v-140b3f5f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-140b3f5f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-140b3f5f>Groups</span></a></div><div class="next" data-v-140b3f5f><a class="link" href="/config/guide/04-host-specific" data-v-140b3f5f><span class="text" data-v-140b3f5f>Host-specific Config</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-140b3f5f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"config_guide_01-default-behaviours.md\":\"e72e9da6\",\"config_guide_02-groups.md\":\"e6c3a19e\",\"config_guide_03-syncing-methods.md\":\"cb77d135\",\"config_guide_04-host-specific.md\":\"42cdfd1b\",\"config_guide_05-priority.md\":\"cea5a16d\",\"config_guide_06-error-handling.md\":\"c6248791\",\"config_guide_index.md\":\"8911f408\",\"config_key-references.md\":\"30eee610\",\"contributing.md\":\"4dff39f3\",\"features_host-specific.md\":\"56050c4a\",\"features_index.md\":\"b2e476bc\",\"features_scope.md\":\"6e96c7c2\",\"index.md\":\"ad410b3b\",\"installation.md\":\"ada8ea6e\"}")</script>
    <script type="module" async src="/assets/app.4c187c71.js"></script>
    
  </body>
</html>